<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="Ufak bir hediye diyelim">
    <meta name="github" content="https://github.com/hikmtwashere">
    <title>Helin' in Doğum Günü</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&family=Poppins:wght@400;600&display=swap"
        rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
        <head>
  
  <!-- Stil dosyaları ve scriptler buraya kadar -->
  
  <!-- Buraya ekle -->
  <style>
    /* müzik butonu ve playlist stilleri */
    .music-toggle-container {
  position: fixed;
  bottom: 20px;  /* üstten konumlandırma yerine alttan */
  right: 20px;   /* sağdan 20px */
  top: auto;     /* varsa üst değerini sıfırla */
  z-index: 9999;
}

    #music-toggle-btn {
      background-color: #ff4081;
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 25px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      transition: background-color 0.3s ease, transform 0.2s ease;
    }
    #music-toggle-btn:hover {
      background-color: #e73370;
      transform: scale(1.05);
    }
    #playlist {
  display: none;
  position: fixed;
  bottom: 70px; /* üst yerine alt */
  right: 20px;   /* sağda kalacak */
  background: white;
  border-radius: 10px;
  padding: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  z-index: 9999;
}

    .track-btn {
      display: block;
      margin: 5px 0;
      padding: 6px 12px;
      background: #fce4ec;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      transition: background 0.2s;
    }
    .track-btn:hover {
      background: #f8bbd0;
    }
    .personality-test-btn {
  background-color: #8e44ad;
  color: white;
  border-radius: 25px;
  padding: 10px 16px;
  font-weight: bold;
  cursor: pointer;
  box-shadow: 0 4px 8px rgba(142, 68, 173, 0.5);
  transition: background-color 0.3s ease;
  border: none; /* bu satırı ekle */
  outline: none; /* bu da ekstra garanti */
}
#btn__personality-test:focus {
    outline: none !important; /* Ana buton için odak çerçevesi kaldırma */
    border: none !important; /* Ekstra güvenlik için */
}
#btn__personality-test {
    border: none !important; /* Ana buton için çerçeve kaldırma */
    outline: none !important; /* Ana buton için odak çerçevesi kaldırma */
}
.personality-test-btn:focus {
    outline: none !important; /* Tarayıcı odak çerçevesini kaldır */
    border: none !important; /* Ekstra güvenlik için */
}
.personality-test-btn:hover {
  background-color: #732d91;
}

#personality-test-modal button {
  background-color: #8e44ad;
  border: none;
  color: white;
  padding: 8px 14px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
}
#personality-test-modal button:disabled {
  background-color: #ccc;
  cursor: default;
  color: #555;
}
#personality-test-modal h2 {
  margin-top: 0;
  margin-bottom: 15px;
  text-align: center;
  font-family: 'Poppins', sans-serif;
}

.personality-test-container {
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
}


  </style>


</head>

<body>
    <div class="music-toggle-container">
  <button id="music-toggle-btn">🎵 Müzik Başlat</button>
  <div id="playlist">
    <button class="track-btn" data-src="birthday.mp3">Sakin (Edepsiz Komedya)</button>
    <button class="track-btn" data-src="romantic1.mp3">Grizu (Bira ve Kahve)</button>
    <button class="track-btn" data-src="romantic2.mp3">Manifest (KTS)</button>
  </div>
</div>
<audio id="audio-player" preload="auto"></audio>
<audio id="birthday-music" src="birthday.mp3" loop preload="auto"></audio>

    <div id="wrapper">
       

        <div class="flag__birthday">
            <img src="./images/1.png" alt="" width="350" class="flag__left">
            <img src="./images/1.png" alt="" width="350" class="flag__right">
        </div>
        <div class="content">
            <div class="left">
                <div class="title">
                    <h1 class="happy">
                        <span style="--t: 4s;">İ</span>
                        <span style="--t: 4.2s;">y</span>
                        <span style="--t: 4.4s;">i</span>
                        <span style="--t: 4.5s;">&nbsp;</span>
                        <span style="--t: 4.6s;">k</span>
                        <span style="--t: 4.8s;">i</span>
                    </h1>
                    <h1 class="birthday">
                        <span style="--t: 5s;">D</span>
                        <span style="--t: 5.2s;">o</span>
                        <span style="--t: 5.4s;">ğ</span>
                        <span style="--t: 5.6s;">d</span>
                        <span style="--t: 5.8s;">u</span>
                        <span style="--t: 6s;">n</span>

                    </h1>
                    <div class="hat">
                        <img src="./images/hat.png" alt="" width="130">
                    </div>
                </div>
                <div class="date__of__birth">
                    <span></span>
                </div>
               

                <div class="btn">
                    <button id="btn__letter">
                        <div class="mail">
                            Helin Hanım Lütfen Buraya Tıklayınız
                            <i class="fa-regular fa-envelope"></i>
                        </div>
                    </button>
                    <button id="btn__confetti">
                        <div class="confetti-btn">
                            🎉 Konfeti Patlatmak İçin Tıkla!
                        </div>
                    </button>
                    <button id="btn__gallery">
                        <div class="gallery-btn">
                            📸 Fotoğraf Galerisi
                        </div>
                    </button>
                    <button id="btn__stars">
                        <div class="stars-btn">
                            ⭐ Yıldızları Aktifleştir
                        </div>
                    </button>
                    <button id="btn__balloons">
                        <div class="balloons-btn">
                            🎈 Balon Patlatma Oyunu
                        </div>
                    </button>
                    <button id="btn__candles">
                        <div class="candles-btn">
                            🕯️ Mum Üfleme
                        </div>
                    </button>
                     <button id="btn__personality-test">
  <div class="personality-test-btn">
    📝 Kişilik Testi
  </div>
</button>
                </div>
            </div>
            <div class="right">
                <div class="box__account">
                    <div class="image">
                        <img src="./images/unnamed.png" alt="">
                    </div>
                    <div class="name">
                        <i class="fa-solid fa-heart"></i>
                        <span>Sevgili Helin</span>
                        <i class="fa-solid fa-heart"></i>
                    </div>
                    <div class="balloon_one">
                        <img width="100px" src="./images/balloon1.png" alt="">
                    </div>
                    <div class="balloon_two">
                        <img width="100px" src="./images/balloon2.png" alt="">
                    </div>
                </div>
                <div class="cricle">
                    <div class="text__cricle">
                        <span style="--i: 1;">İ</span>
                        <span style="--i: 2;">Y</span>
                        <span style="--i: 3;">İ</span>
                        <span style="--i: 4;">-</span>
                        <span style="--i: 5;">K</span>
                        <span style="--i: 6;">İ</span>
                        <span style="--i: 7;">-</span>
                        <span style="--i: 8;">V</span>
                        <span style="--i: 9;">A</span>
                        <span style="--i: 10;">R</span>
                        <span style="--i: 11;">S</span>
                        <span style="--i: 12;">I</span>
                        <span style="--i: 13;">N</span>

                    </div>
                    <i class="fa-solid fa-heart"></i>
                </div>
            </div>
        </div>
        <div class="decorate_star star1" style="--t: 15s;"></div>
        <div class="decorate_star star2" style="--t: 15.2s;"></div>
        <div class="decorate_star star3" style="--t: 15.4s;"></div>
        <div class="decorate_star star4" style="--t: 15.6s;"></div>
        <div class="decorate_star star5" style="--t: 15.8s;"></div>
        <div class="decorate_flower--one" style="--t: 15s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>
        <div class="decorate_flower--two" style="--t: 15.3s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>
        <div class="decorate_flower--three" style="--t: 15.6s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>
        <div class="decorate_bottom">
            <img src="./images/decorate.png" alt="" width="100">
        </div>
        <div class="smiley__icon">
            <img src="./images/smiley_icon.png" alt="" width="100">
        </div>
<div id="personality-test-modal" style="display:none; position: fixed; top:50%; left:50%; transform: translate(-50%, -50%);
background: white; border-radius: 15px; box-shadow: 0 4px 16px rgba(0,0,0,0.25); width: 90vw; max-width: 400px; padding: 20px; z-index: 10000;">
  <h2>Kişilik Testi</h2>
  <div id="test-question-container"></div>
  <div style="margin-top: 20px; text-align: right;">
    <button id="test-prev-btn" disabled>Önceki</button>
    <button id="test-next-btn">Sonraki</button>
    <button id="test-close-btn" style="margin-left: 10px;">Kapat</button>
  </div>
</div>


        <div class="boxMail">
            <i class="fa-solid fa-xmark"></i>
            <div class="boxMail-container">
                <div class="card1">

                    <div class="userImg">
                        <img src="images/unnamed.png" alt="">
                    </div>
                    <h4 class="username">Helin'e 💖<span class="underline"></span></h4>

                    <h3>İYİ Kİ DOĞMUŞSUN FISTIK</h3>
                    <div class="imageCute">
                        <img src="cute1.png" alt="">
                    </div>
                </div>
                <div class="card2">
                    <img id="mewmew" src="images/mewmew.gif" alt="mewmew">

                    <div class="card2-content">
                        <h3>Helin'e !</h3>
                        <h2>
                            Bugün 1.72, komik, gözleri güzel, gülüşü güzel, cıvıl cıvıl, neşeli, sevgi dolu, sevgilimin doğum günü.     
                        İyi ki tanışmışız, iyi ki hayatımdasın, iyi ki sevgilimsin.
                        Keşke bugün yanında olabilseydim ve bu günü birlikte kutlayabilseydik. (Muhtemelen yine yağmur yağardı ama olsun.)
                        Ama biliyorum ki mesafeler kalplere engel değil.
                        Senin için böyle ufak bir hediye hazırladım umarım beğenirsin.
                        Seni çok seviyorum, iyi ki doğmuşsun fıstığım. 🎂
                        </h2>

                        <div class="imageCute2">
                            <img src="cute2.png" alt="">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <audio id="birthday-music" src="birthday.mp3" loop></audio>
        
        <!-- Balon Patlatma Oyunu -->
        <div id="balloon-game" style="display: none;">
            <div class="game-header">
                <h2>🎈 Balon Patlatma Oyunu </h2>
                <div class="game-score">Skor: <span id="score">0</span></div>
                <button id="close-game">❌</button>
            </div>
            <div class="game-area" id="game-area">
                <!-- Balonlar dinamik olarak buraya eklenecek -->
            </div>
        </div>

        <!-- Mum Üfleme Oyunu -->
        <div id="candle-game" style="display: none;">
            <div class="candle-header">
                <h2>🕯️ Mum Üfleme Oyunu</h2>
                <p>Mikrofonunuza üfleyip mumları söndürebilir misiniz Helin Hanım?</p>
                <button id="close-candles">❌</button>
            </div>
            <div class="candle-area">
                <div class="birthday-cake">
                    🎂
                    <div class="candles-container">
                        <div class="candle active" data-candle="1">🕯️</div>
                        <div class="candle active" data-candle="2">🕯️</div>
                        <div class="candle active" data-candle="3">🕯️</div>
                        <div class="candle active" data-candle="4">🕯️</div>
                        <div class="candle active" data-candle="5">🕯️</div>
                    </div>
                </div>
                <div class="blow-instruction">
                    <p id="candle-status">5 mum yanıyor - hepsini söndürün!</p>
                    <div class="volume-indicator">
                        <div class="volume-bar" id="volume-bar"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="music-player" class="music-player" style="display: none;">
            <div class="music-controls">
                <span class="music-title">Grizu (Bira ve Kahve)</span>
                <button id="play-pause-btn">▶️</button>
                <button id="stop-btn">⏹️</button>
                <div class="volume-control">
                    <span>🔊</span>
                    <input type="range" id="volume-slider" min="0" max="100" value="50">
                </div>
            </div>
        </div>

        <div id="gallery-modal" class="gallery-modal" style="display: none;">
            <div class="gallery-content">
                <h2 class="gallery-title">Fotoğraf Galerisi</h2>
                <span class="gallery-close">&times;</span>
                <div class="gallery-container">
                    <div class="gallery-slides">
                        <div class="gallery-slide active">
                            <img src="images/image1.png" alt="Sevgili Helin">
                            <p>Nice</p>
                        </div>
                        <div class="gallery-slide">
                            <img src="images/image2.png" alt="Kalp">
                            <p>Beraber</p>
                        </div>
                        <div class="gallery-slide">
                            <img src="images/image3.png" alt="Aşk">
                            <p>Senelere</p>
                            </div>
                        <div class="gallery-slide">
                            <img src="images/image4.png" alt="Aşk">
                            <p>❤️</p>
                        </div>
                        <div class="gallery-slide">
                            <img src="images/image5.png" alt="Alk">
                            <p>🚀</p>
                        </div>
                        <div class="gallery-slide">
                            <img src="images/image6.png" alt="Adşk">
                            <p>🚢</p>
                        </div>
                        <div class="gallery-slide">
                            <img src="images/image7.png" alt="Aşsk">
                            <p>😺</p>
                        </div>
                        <div class="gallery-slide">
                            <img src="images/image8.png" alt="Aşsdsk">
                            <p>🍓</p>
                        </div>
                        <div class="gallery-slide">
                            <img src="images/image9.png" alt="Aşdsk">
                            <p>💪</p>
                        </div>
                    </div>
                </div>
                <div class="gallery-nav">
                    <button class="gallery-prev">❮</button>
                    <span class="gallery-counter">1 / 3</span>
                    <button class="gallery-next">❯</button>
                </div>
            </div>
        </div>
    </div>

<script>
  const musicToggleBtn = document.getElementById('music-toggle-btn');
  const playlist = document.getElementById('playlist');
  const audioPlayer = document.getElementById('audio-player');
  const birthdayMusic = document.getElementById('birthday-music');
  const trackButtons = document.querySelectorAll('.track-btn');

  let musicPlaying = false;

  musicToggleBtn.addEventListener('click', () => {
    if (!musicPlaying) {
      if (!audioPlayer.src) {
        const firstTrack = document.querySelector('.track-btn');
        if (firstTrack) {
          audioPlayer.src = firstTrack.getAttribute('data-src');
        }
      }
      birthdayMusic.pause();
      birthdayMusic.currentTime = 0;
      audioPlayer.play();
      musicPlaying = true;
      musicToggleBtn.textContent = '⏸️ Müzik Durdur';
      playlist.style.display = 'block';
    } else {
      audioPlayer.pause();
      birthdayMusic.pause();
      musicPlaying = false;
      musicToggleBtn.textContent = '▶️ Müzik Başlat';
      playlist.style.display = 'none';
    }
  });

  trackButtons.forEach(button => {
    button.addEventListener('click', () => {
      const src = button.getAttribute('data-src');
      birthdayMusic.pause();
      birthdayMusic.currentTime = 0;
      audioPlayer.src = src;
      audioPlayer.play();
      musicPlaying = true;
      musicToggleBtn.textContent = `⏸️ Çalıyor: ${button.textContent.trim()}`;
      playlist.style.display = 'block';
    });
  });

  audioPlayer.volume = 0.5;
</script>

</body>
<script>
    let datetxt = "15 Temmuz 2003";
    let datatxtletter = "My love. You are a very special girl. I always silently thank you for coming into my life. Today, I wish you all the best, lots of health, and lots of joy. I always hope we will celebrate many more birthdays like this together. Happy birthday to you.💕";
    let titleLetter = "Helinim'e!";
    let charArrDate = datetxt.split('');
    let charArrDateLetter = datatxtletter.split('');
    let charArrTitle = titleLetter.split('');
    let currentIndex = 0;
    let currentIndexLetter = 0;
    let currentIndexTitle = 0;
    let date__of__birth = document.querySelector(".date__of__birth span");
    let text__letter = document.querySelector(".text__letter p");
    setTimeout(function () {
        timeDatetxt = setInterval(function () {
            if (currentIndex < charArrDate.length) {
                date__of__birth.textContent += charArrDate[currentIndex];
                currentIndex++;
            }
            else {
                let i = document.createElement("i");
                i.className = "fa-solid fa-star"
                document.querySelector(".date__of__birth").prepend(i)
                document.querySelector(".date__of__birth").appendChild(i.cloneNode(true))
                clearInterval(timeDatetxt)
            }
        }, 100)
    }, 12000)

    var intervalContent;
    var intervalTitle;
    $("#btn__letter").on("click", function () {
        $(".box__letter").slideDown()
        setTimeout(function () {
            $(".letter__border").slideDown();
        }, 1000)
        setTimeout(function () {
            intervalTitle = setInterval(function () {
                if (currentIndexTitle < charArrTitle.length) {
                    document.querySelector(".title__letter").textContent += charArrTitle[currentIndexTitle];
                    let i = document.createElement("i");
                    i.className = "fa-solid fa-heart"
                    document.querySelector(".title__letter").appendChild(i)
                    currentIndexTitle++;
                }
                else {
                    clearInterval(intervalTitle)
                }
            }, 100)
        }, 2000)
        setTimeout(function () {
            document.querySelector("#heart__letter").classList.add("animationOp");
            document.querySelector(".love__img").classList.add("animationOp");
            document.querySelector("#mewmew").classList.add("animationOp");
        }, 2800)
        setTimeout(function () {
            document.querySelectorAll(".heart").forEach((item) => {
                item.classList.add("animation")
            })
        }, 3500)
        setTimeout(function () {
            intervalContent = setInterval(function () {
                if (currentIndexLetter < charArrDateLetter.length) {
                    text__letter.textContent += charArrDateLetter[currentIndexLetter];
                    currentIndexLetter++;
                }
                else {
                    clearInterval(intervalContent)
                }
            }, 50)
        }, 6000)
    })
    $(".close").on("click", function () {
        clearInterval(intervalContent)
        document.querySelector(".title__letter").textContent = "";
        text__letter.textContent = "";
        currentIndexLetter = 0
        currentIndexTitle = 0
        document.querySelector("#heart__letter").classList.remove("animationOp");
        document.querySelector(".love__img").classList.remove("animationOp");
        document.querySelector("#mewmew").classList.remove("animationOp");
        document.querySelectorAll(".heart").forEach((item) => {
            item.classList.remove("animation")
        })
        $(".box__letter").slideUp();
        $(".letter__border").slideUp();
    })



    let mailBox = document.querySelector('.mail')
    let boxmail = document.querySelector('.boxMail')
    var close = document.querySelector('.fa-xmark')
    mailBox.onclick = function () {
        mailBox.classList.toggle('active')
        boxmail.classList.add('active')
    }

    close.addEventListener('click', function () {
        boxmail.classList.remove('active')
    })

    // Konfeti butonu
    document.getElementById('btn__confetti').addEventListener('click', function() {
        createConfetti();
    });

    function createConfetti() {
        const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#f0932b', '#eb4d4b', '#6c5ce7', '#a29bfe'];

        for (let i = 0; i < 50; i++) {
            const confetti = document.createElement('div');
            confetti.className = 'confetti-piece';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.left = Math.random() * 100 + '%';
            confetti.style.animationDelay = Math.random() * 3 + 's';
            confetti.style.animationDuration = Math.random() * 2 + 3 + 's';
            confetti.style.animation = 'confetti-fall ' + (Math.random() * 2 + 3) + 's linear forwards';

            document.body.appendChild(confetti);

            setTimeout(() => {
                confetti.remove();
            }, 5000);
        }
    }

    // Müzik kullanıcı etkileşimi ile başlat
   

    // Fotoğraf galerisi fonksiyonları
    const galleryModal = document.getElementById('gallery-modal');
    const galleryClose = document.querySelector('.gallery-close');
    const gallerySlides = document.querySelectorAll('.gallery-slide');
    const galleryPrev = document.querySelector('.gallery-prev');
    const galleryNext = document.querySelector('.gallery-next');
    const galleryCounter = document.querySelector('.gallery-counter');
    let currentSlide = 0;

    document.getElementById('btn__gallery').addEventListener('click', function() {
        galleryModal.style.display = 'block';
        showSlide(0);
    });

    galleryClose.addEventListener('click', function() {
        galleryModal.style.display = 'none';
    });

    galleryPrev.addEventListener('click', function() {
        currentSlide = currentSlide > 0 ? currentSlide - 1 : gallerySlides.length - 1;
        showSlide(currentSlide);
    });

    galleryNext.addEventListener('click', function() {
        currentSlide = currentSlide < gallerySlides.length - 1 ? currentSlide + 1 : 0;
        showSlide(currentSlide);
    });

    function showSlide(index) {
        gallerySlides.forEach(slide => slide.classList.remove('active'));
        gallerySlides[index].classList.add('active');
        galleryCounter.textContent = `${index + 1} / ${gallerySlides.length}`;
    }

    // Tıklanabilir yıldızlar
    let starsActive = false;
    document.getElementById('btn__stars').addEventListener('click', function() {
        starsActive = !starsActive;
        const stars = document.querySelectorAll('.decorate_star');
        const btn = document.getElementById('btn__stars');

        if (starsActive) {
            btn.querySelector('.stars-btn').textContent = '⭐ Yıldızları Kapat';
            stars.forEach(star => {
                star.style.cursor = 'pointer';
                star.addEventListener('click', handleStarClick);
            });
        } else {
            btn.querySelector('.stars-btn').textContent = '⭐ Yıldızları Aktifleştir';
            stars.forEach(star => {
                star.style.cursor = 'default';
                star.removeEventListener('click', handleStarClick);
            });
        }
    });

    function handleStarClick(e) {
        const star = e.target;
        star.style.backgroundColor = getRandomColor();
        star.style.transform = 'scale(1.5)';

        // Parıltı efekti
        const sparkle = document.createElement('div');
        sparkle.className = 'sparkle-effect';
        sparkle.style.left = e.pageX + 'px';
        sparkle.style.top = e.pageY + 'px';
        document.body.appendChild(sparkle);

        setTimeout(() => {
            star.style.transform = 'scale(1)';
            sparkle.remove();
        }, 300);
    }

    function getRandomColor() {
        const colors = ['#FFD700', '#FF6B35', '#FF1744', '#E91E63', '#9C27B0', '#673AB7', '#3F51B5', '#2196F3'];
        return colors[Math.floor(Math.random() * colors.length)];
    }

    // Balon Patlatma Oyunu
    let gameScore = 0;
    let gameActive = false;
    let balloonCount = 0;
    let gameInterval;

    document.getElementById('btn__balloons').addEventListener('click', function() {
        startBalloonGame();
    });

    document.getElementById('close-game').addEventListener('click', function() {
        endBalloonGame();
    });

    function startBalloonGame() {
        document.getElementById('balloon-game').style.display = 'block';
        gameActive = true;
        gameScore = 0;
        balloonCount = 0;
        document.getElementById('score').textContent = gameScore;
        
        // Her 2 saniyede bir balon oluştur
        gameInterval = setInterval(createBalloon, 1000);
        
        // 30 saniye sonra oyunu bitir
        setTimeout(() => {
            if (gameActive) {
                endBalloonGame();
                alert('Tebrikler Helincik! Final skorunuz: ' + gameScore);
            }
        }, 15000);
    }

    function createBalloon() {
        if (!gameActive) return;
        
        const gameArea = document.getElementById('game-area');
        const balloon = document.createElement('div');
        balloon.className = 'game-balloon';
        balloon.innerHTML = '🎈';
        
        // Rastgele pozisyon
        balloon.style.left = Math.random() * (gameArea.offsetWidth - 50) + 'px';
        balloon.style.top = Math.random() * (gameArea.offsetHeight - 50) + 'px';
        
        // Rastgele renk filtresi
        const colors = ['hue-rotate(0deg)', 'hue-rotate(60deg)', 'hue-rotate(120deg)', 'hue-rotate(180deg)', 'hue-rotate(240deg)', 'hue-rotate(300deg)'];
        balloon.style.filter = colors[Math.floor(Math.random() * colors.length)];
        
        balloon.addEventListener('click', function() {
            popBalloon(balloon);
        });
        
        gameArea.appendChild(balloon);
        balloonCount++;
        
        // 5 saniye sonra balonun kendini yok etmesi
        setTimeout(() => {
            if (balloon.parentNode) {
                balloon.remove();
                balloonCount--;
            }
        }, 5000);
    }

    function popBalloon(balloon) {
        gameScore += 10;
        document.getElementById('score').textContent = gameScore;
        
        // Patlama efekti
        balloon.innerHTML = '💥';
        balloon.style.transform = 'scale(1.5)';
        balloon.style.filter = 'none';
        
        setTimeout(() => {
            balloon.remove();
            balloonCount--;
        }, 200);
        
        // Konfeti efekti
        createMiniConfetti(balloon.offsetLeft, balloon.offsetTop);
    }

    function createMiniConfetti(x, y) {
        const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24'];
        
        for (let i = 0; i < 8; i++) {
            const confetti = document.createElement('div');
            confetti.className = 'mini-confetti';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.left = x + 'px';
            confetti.style.top = y + 'px';
            confetti.style.animation = 'mini-confetti-burst 0.6s ease-out forwards';
            
            document.body.appendChild(confetti);
            
            setTimeout(() => {
                confetti.remove();
            }, 600);
        }
    }

    function endBalloonGame() {
        gameActive = false;
        clearInterval(gameInterval);
        document.getElementById('balloon-game').style.display = 'none';
        
        // Tüm balonları temizle
        const balloons = document.querySelectorAll('.game-balloon');
        balloons.forEach(balloon => balloon.remove());
    }

    // Mum Üfleme Oyunu
    let micStream = null;
    let audioContext = null;
    let analyser = null;
    let candlesLit = 5;

    document.getElementById('btn__candles').addEventListener('click', function() {
        startCandleGame();
    });

    document.getElementById('close-candles').addEventListener('click', function() {
        endCandleGame();
    });

    async function startCandleGame() {
        try {
            document.getElementById('candle-game').style.display = 'block';
            candlesLit = 5;
            
            // Tüm mumları yeniden yak
            document.querySelectorAll('.candle').forEach(candle => {
                candle.classList.add('active');
                candle.textContent = '🕯️';
            });
            
            document.getElementById('candle-status').textContent = 'Dilek tut ve mumları üfle!';

            // Mikrofon erişimi iste
            micStream = await navigator.mediaDevices.getUserMedia({ audio: true });
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const source = audioContext.createMediaStreamSource(micStream);
            analyser = audioContext.createAnalyser();
            analyser.fftSize = 256;
            source.connect(analyser);

            // Ses seviyesini sürekli kontrol et
            monitorBlowing();
        } catch (err) {
            alert('Helin Hanım mikrofon erişimi gerekli! Lütfen mikrofon iznini verin.');
            console.error('Mikrofon erişimi hatası:', err);
        }
    }

    function monitorBlowing() {
        const dataArray = new Uint8Array(analyser.frequencyBinCount);
        
        function checkVolume() {
            if (!analyser) return;
            
            analyser.getByteFrequencyData(dataArray);
            const average = dataArray.reduce((a, b) => a + b) / dataArray.length;
            
            // Ses seviyesi göstergesi
            const volumeBar = document.getElementById('volume-bar');
            volumeBar.style.width = Math.min(average * 2, 100) + '%';
            
            // Eğer ses yeterince yüksekse mum söndür
            if (average > 70 && candlesLit > 0) {
                blowOutCandle();
            }
            
            if (candlesLit > 0) {
                requestAnimationFrame(checkVolume);
            }
        }
        
        checkVolume();
    }

    function blowOutCandle() {
        const activeCandless = document.querySelectorAll('.candle.active');
        if (activeCandless.length > 0) {
            const randomCandle = activeCandless[Math.floor(Math.random() * activeCandless.length)];
            randomCandle.classList.remove('active');
            randomCandle.textContent = '💨';
            candlesLit--;
            
            // Konfeti efekti
            createMiniConfetti(randomCandle.offsetLeft + 250, randomCandle.offsetTop + 100);
            
            if (candlesLit === 0) {
                document.getElementById('candle-status').textContent = '🎉 Tebrikler! Tüm mumları söndürdünüz!';
                setTimeout(() => {
                    createConfetti();
                    alert('🎂 Doğum günün kutlu olsun yeniden! Ne dilediysen artık gerçek olur inş! 🎉');
                }, 1000);
            } else {
                document.getElementById('candle-status').textContent = `${candlesLit} mum daha yanıyor!`;
            }
        }
    }

    function endCandleGame() {
        document.getElementById('candle-game').style.display = 'none';
        
        // Mikrofon akışını kapat
        if (micStream) {
            micStream.getTracks().forEach(track => track.stop());
            micStream = null;
        }
        
        // Audio context'i kapat
        if (audioContext) {
            audioContext.close();
            audioContext = null;
            analyser = null;
        }
        
        candlesLit = 0;
    }

 const personalityTestBtn = document.getElementById('btn__personality-test');
const personalityTestModal = document.getElementById('personality-test-modal');
const questionContainer = document.getElementById('test-question-container');
const prevBtn = document.getElementById('test-prev-btn');
const nextBtn = document.getElementById('test-next-btn');
const closeBtn = document.getElementById('test-close-btn');

const questions = [
  {
    q: "Bana kızdığında genelde ne yaparsın?",
    options: [
      { text: "Günün yarısını zehir ederim 👉👈", score: 3 },
      { text: "Trip atarım ama nedenini hemen söylemem", score: 2 },
      { text: "Hiç kızmam ki ben sana 🥺", score: 1 }
    ]
  },
  {
    q: "Benim en çok hangi davranışımı seviyorsun?",
    options: [
      { text: "Eril olmam", score: 3 },
      { text: "Komik olmam", score: 2 },
      { text: "Olgun olmam", score: 1 }
    ]
  },
  {
    q: " İlişkimiz bir film türü olsa hangisi olurdu?",
    options: [
      { text: "Sitcom", score: 3 },
      { text: "Dram", score: 2 },
      { text: "Macera", score: 1 }
    ]
  },
  {
    q: " Birlikte olduğumuzda en çok hangisi seni mutlu ediyor?",
    options: [
      { text: "Yapacağın şakayı daha sen söylemeden tahmin etmem", score: 3 },
      { text: "Koruyucu kollayıcı hissettirme", score: 2 },
      { text: "Saçma sapan şeylere bile birlikte gülmemiz", score: 1 }
    ]
  },
  {
    q: "Bir tartışmada haklı kim olur?",
    options: [
      { text: "Ben olurum, çünkü ben her zaman haklıyım!", score: 3 },
      { text: "Ara sıra karşı tarafta haklıdır.", score: 2 },
      { text: "Mantıklı olan taraf", score: 1 }
    ]
  },
  {
    q: "Bizim için en bereketli hava durumu :)",
    options: [
      { text: "Yağmurlu", score: 3 },
      { text: "Güneşli", score: 2 },
      { text: "Karlı ?", score: 1 }
    ]
  }
];

let currentQuestionIndex = 0;
let answers = new Array(questions.length).fill(null);

function renderQuestion() {
  const q = questions[currentQuestionIndex];
  let html = `<p><strong>${currentQuestionIndex + 1}. Soru:</strong> ${q.q}</p>`;
  html += '<form id="question-form">';
  q.options.forEach((opt, idx) => {
    const checked = answers[currentQuestionIndex] === idx ? 'checked' : '';
    html += `
      <label style="display:block; margin-bottom:8px; cursor:pointer;">
        <input type="radio" name="answer" value="${idx}" ${checked} required> ${opt.text}
      </label>
    `;
  });
  html += '</form>';
  questionContainer.innerHTML = html;

  prevBtn.disabled = currentQuestionIndex === 0;
  nextBtn.textContent = currentQuestionIndex === questions.length -1 ? 'Bitir' : 'Sonraki';
}

function showResult() {
  const totalScore = answers.reduce((sum, idx, i) => {
    if(idx === null) return sum;
    return sum + questions[i].options[idx].score;
  }, 0);

  let message = '';
  if (totalScore >= 16) {
    message = 'Birbirimiz aşırı derecede tamamladığımızı bir kere daha kanıtladın. Doğum günü kutlu olsun fıstığım.';
  } else if (totalScore >= 11) {
    message = '187 mühendis oğlanına sonunda kavuştun. Bende 172 fıstığa :) Doğum günün kutlu olsun.';
  } else {
    message = 'Yaaani en iyi performansın değil bu testte. Bence bilerek yanlış olanları işaretledin 😮';
  }

  questionContainer.innerHTML = `
    <h3>Test Sonucu:</h3>
    <p>Puanınız: <strong>${totalScore}</strong></p>
    <p>${message}</p>
  `;

  prevBtn.style.display = 'none';
  nextBtn.style.display = 'none';
}

personalityTestBtn.addEventListener('click', () => {
  personalityTestModal.style.display = 'block';
  currentQuestionIndex = 0;
  answers.fill(null);
  prevBtn.style.display = 'inline-block';
  nextBtn.style.display = 'inline-block';
  renderQuestion();
});

prevBtn.addEventListener('click', () => {
  if (currentQuestionIndex > 0) {
    currentQuestionIndex--;
    renderQuestion();
  }
});

nextBtn.addEventListener('click', () => {
  const form = document.getElementById('question-form');
  const formData = new FormData(form);
  const selected = formData.get('answer');
  if (selected === null) {
    alert('Helin Hanım lütfen bir seçenek işaretleyin.');
    return;
  }
  answers[currentQuestionIndex] = parseInt(selected);

  if (currentQuestionIndex < questions.length - 1) {
    currentQuestionIndex++;
    renderQuestion();
  } else {
    showResult();
  }
});

closeBtn.addEventListener('click', () => {
  personalityTestModal.style.display = 'none';
});

</script>

</html>
